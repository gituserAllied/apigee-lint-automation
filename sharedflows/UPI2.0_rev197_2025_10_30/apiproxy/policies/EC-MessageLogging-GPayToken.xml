<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ConnectorCallout async="false" continueOnError="true" enabled="true" name="EC-MessageLogging-GPayToken">
    <DisplayName>EC-MessageLogging-GPayToken</DisplayName>
    <Connector>ICICI-Logging</Connector>
    <Action>log</Action>
    <Input><![CDATA[{
        "logName": "{apiproxy.name}",
        "metadata": {
            "resource": {
                "type": "global"
            },
            "severity": "{logLevel}",
            "insertId": "{messageid}",
            "httpRequest": {
                "requestMethod": "{requestMethod}",
                "requestUrl": "{requestUrl}",
                "requestSize": "{requestSize}",
                "userAgent": "{userAgent}",
                "remoteIp": "{remoteIp}",
                "protocol": "{protocol}",
                "status": "{status}",
                "responseSize": "{clientResponseSize}",
                "latency": {"seconds": {latency}}
            }
        },
        "message": {
            "timestamp": "{system.time}", 
            "timezone": "{system.time.zone}", 
            "messageID": "{messageid}",
            "systemUuid" : "{system.uuid}",
            "organization": "{organization.name}",
            "environment": "{environment.name}",
            "apiProxy": "{apiproxy.name}",
            "apiProxyRevision": "{apiproxy.revision}",
            "httpXForwardedFor": "{httpXForwardedFor}",
            "developer": "{developer.email}",
            "developerApp": "{developer.app.name}",
            "apiProduct": "{apigee.apiproduct.name}",
            "clientReceivedStartTime": "{clientReceivedStartTime}",
            "clientReceivedEndTime": "{clientReceivedEndTime}",
            "clientRequestContentType": "{clientRequestContentType}",
            "clientRequest": "{request.content}",
            "clientSentStartTime" : "{client.sent.start.timestamp}",
            "clientSentEndTime" : "{client.sent.end.timestamp}",
            "targetUrl": "{targetUrl}",
            "targetIP": "{targetIP}",
            "targetHost": "{targetHost}",
            "targetName": "{targetName}",
            "targetRequestVerb": "{targetRequestVerb}",
            "targetRequestContentType": "{targetRequestContentType}",
            "targetRequest": {targetRequest},
            "targetSentStartTime": "{targetSentStartTime}",
            "targetSentEndTime": "{targetSentEndTime}",
            "targetReceivedStartTime": "{targetReceivedStartTime}",
            "targetReceivedEndTime": "{targetReceivedEndTime}",
            "targetResponseSize": "{targetResponseSize}",
            "targetResponseContentType": "{targetResponseContentType}",
            "targetResponse": {targetResponse},
            "targetStatusCode" : "{targetStatusCode}",
            "targetErrorCodeFromResponsePayload" : "{target_error_code_from_response_payload}",
            "errorCodeFromClientResponsePayload" : "{error_code_from_client_response_payload}",
            "clientResponseSize": "{clientResponseSize}",
            "clientResponseContentType": "{clientResponseContentType}",
            "clientResponse": {message.content},
            "latencyInMilliseconds": "{totalResponseTime}",
            "virtualHost": "{virtualHost}",
            "apigeeFaultCode" : "{message.header.X-Apigee.fault-code}",
            "apigeeFaultFlag" : "{message.header.X-Apigee.fault-flag}",
            "apigeeFaultPolicy" : "{message.header.X-Apigee.fault-policy}",
            "apigeeFaultSource" : "{message.header.X-Apigee.fault-source}",
            "apigeeFaultName" : "{apigeeFaultName}",
            "CATCH_EXCEPTION" : "{CATCH_EXCEPTION}",
            "DECRYPTION_EXECUTION_TIME" : "{DECRYPTION_EXECUTION_TIME}",
            "ENCRYPTION_EXECUTION_TIME" : "{ENCRYPTION_EXECUTION_TIME}",
            "apigeePolicyMetrics" : {
                "SC-CaptureAnalytics" : "{apigee.metrics.policy.SC-CaptureAnalytics.timeTaken}",
                "FC-AuthenticateRequest" : "{apigee.metrics.policy.FC-AuthenticateRequest.timeTaken}",
                "VA-VerifyApiKey" : "{apigee.metrics.policy.FC-VA-VerifyApiKey.timeTaken}",
                "AM-SpikeArrestIdentifier" : "{apigee.metrics.policy.AM-SpikeArrestIdentifier.timeTaken}",
                "AM-StripApiKey" : "{apigee.metrics.policy.AM-StripApiKey.timeTaken}",
                "KVM-FetchIpList" : "{apigee.metrics.policy.KVM-FetchIpList.timeTaken}",
                "JS-SplitAllowedIPs" : "{apigee.metrics.policy.JS-SplitAllowedIPs.timeTaken}",
                "AC-WhitelistIPs" : "{apigee.metrics.policy.AC-WhitelistIPs.timeTaken}",
                "SA-ProtectBackends": "{apigee.metrics.policy.SA-ProtectBackends.timeTaken}",
                "FC-ThreatProtection" : "{apigee.metrics.policy.FC-ThreatProtection.timeTaken}",
                "JS-Combined": "{apigee.metrics.policy.JS-Combined.timeTaken}",
                "JS-ParameterValidation" : "{apigee.metrics.policy.JS-ParameterValidation.timeTaken}",
                "XTP-SchemaValidation" : "{apigee.metrics.policy.XTP-SchemaValidation.timeTaken}",
                "JTP-SchemaValidation" : "{apigee.metrics.policy.JTP-SchemaValidation.timeTaken}",
                "RTP-SqlInjection" : "{apigee.metrics.policy.RTP-SqlInjection.timeTaken}",
                "RTP-CodeInjection" : "{apigee.metrics.policy.RTP-CodeInjection.timeTaken}",
                "RE-SQLAndCodeInjection": "{apigee.metrics.policy.RE-SQLAndCodeInjection.timeTaken}",
                "AM-RemoveUnwantedHeaders": "{apigee.metrics.policy.AM-RemoveUnwantedHeaders.timeTaken}",
                "JS-SqlParametersInjection" : "{apigee.metrics.policy.JS-SqlParametersInjection.timeTaken}",
                "JS-CodeParametersInjection" : "{apigee.metrics.policy.JS-CodeParametersInjection.timeTaken}",
                "FC-Decryption" : "{apigee.metrics.policy.FC-Decryption.timeTaken}",
                "AM-CaptureClientRequest": "{apigee.metrics.policy.AM-CaptureClientRequest.timeTaken}",
                "KVM-ICICIConfig" : "{apigee.metrics.policy.KVM-ICICIConfig.timeTaken}",
                "KVM-ICICIMerchantConfig": "{apigee.metrics.policy.KVM-ICICIMerchantConfig.timeTaken}",
                "VJ-VerifyJwt": "{apigee.metrics.policy.VJ-VerifyJwt.timeTaken}",
                "EV-ExtractContentAndKey" : "{apigee.metrics.policy.EV-ExtractContentAndKey.timeTaken}",
                "JC-PGP-Decryption": "{apigee.metrics.policy.JC-PGP-Decryption.timeTaken}",
                "JC-Decryption" : "{apigee.metrics.policy.JC-Decryption.timeTaken}",
                "JC-Decryption-Java-Code": "{DECRYPTION_EXECUTION_TIME}",
                "JS-ReplacePlusSign" : "{apigee.metrics.policy.JS-ReplacePlusSign.timeTaken}",
                "AM-SetPayload" : "{apigee.metrics.policy.AM-SetPayload.timeTaken}",
                "JS-CreateUrlEncodedRequest" : "{apigee.metrics.policy.JS-CreateUrlEncodedRequest.timeTaken}",
                "AM-ConvertToUrlEncoded" : "{apigee.metrics.policy.AM-ConvertToUrlEncoded.timeTaken}",
                "KVM-FetchBackendUrl" : "{apigee.metrics.policy.KVM-FetchBackendUrl.timeTaken}",
                "JS-TargetRouting" : "{apigee.metrics.policy.JS-TargetRouting.timeTaken}",
                "AM-SetBackendHeaders": "{apigee.metrics.policy.AM-SetBackendHeaders.timeTaken}",
                "FC-Encryption" : "{apigee.metrics.policy.FC-Encryption.timeTaken}",
                "AM-CaptureTargetResponse": "{apigee.metrics.policy.AM-CaptureTargetResponse.timeTaken}",
                "KVM-ICICIConfig" : "{apigee.metrics.policy.KVM-ICICIConfig.timeTaken}",
                "JC-PGP-Encryption": "{apigee.metrics.policy.JC-PGP-Encryption.timeTaken}",
                "JC-Encryption" : "{apigee.metrics.policy.JC-Encryption.timeTaken}",
                "GJ-GenerateJwt": "{apigee.metrics.policy.GJ-GenerateJwt.timeTaken}",
                "AM-SetPayload" : "{apigee.metrics.policy.AM-SetPayload.timeTaken}",
                "AM-AddCORS" : "{apigee.metrics.policy.AM-AddCORS.timeTaken}",
                "JS-InitializeVariables" : "{apigee.metrics.policy.JS-InitializeVariables.timeTaken}",
                "FC-LogResponses" : "{apigee.metrics.policy.FC-LogResponses.timeTaken}",
                "KVM-EnvLogConfig" : "{apigee.metrics.policy.KVM-EnvLogConfig.timeTaken}",
                "KVM-ProxyLogConfig" : "{apigee.metrics.policy.KVM-ProxyLogConfig.timeTaken}",
                "FC-ErrorHandling" : "{apigee.metrics.policy.FC-ErrorHandling.timeTaken}",
                "JS-HandleErrors" : "{apigee.metrics.policy.JS-HandleErrors.timeTaken}",
                "AM-SetJsonErrorResponse" : "{apigee.metrics.policy.AM-SetJsonErrorResponse.timeTaken}",
                "AM-SetPlainTextErrorResponse" : "{apigee.metrics.policy.AM-SetPlainTextErrorResponse.timeTaken}",
                "FC-Encryption" : "{apigee.metrics.policy.FC-Encryption.timeTaken}",
                "FC-InitializeLogVariables" : "{apigee.metrics.policy.FC-InitializeLogVariables.timeTaken}",
                "JS-InitializeVariables" : "{apigee.metrics.policy.JS-InitializeVariables.timeTaken}",
                "FC-LogResponses" : "{apigee.metrics.policy.FC-LogResponses.timeTaken}",
                "FC-LogErrors" : "{apigee.metrics.policy.FC-LogErrors.timeTaken}",
                "KVM-EnvLogConfig" : "{apigee.metrics.policy.KVM-EnvLogConfig.timeTaken}",
                "KVM-ProxyLogConfig" : "{apigee.metrics.policy.KVM-ProxyLogConfig.timeTaken}",
                "JS-LogConfig" : "{apigee.metrics.policy.JS-LogConfig.timeTaken}",
                "AM-AddCORS": "{apigee.metrics.policy.AM-AddCORS.timeTaken}",
                "EC-MessageLogging" : "{apigee.metrics.policy.EC-MessageLogging.timeTaken}",
                "AM-SetDefaultFailureResponse": "{apigee.metrics.policy.AM-SetDefaultFailureResponse.timeTaken}",
				"AM-SetFailureResponse": "{apigee.metrics.policy.AM-SetFailureResponse.timeTaken}",
				"AM-SetSuccessResponse": "{apigee.metrics.policy.AM-SetSuccessResponse.timeTaken}",
				"AM-SetTargetRequest": "{apigee.metrics.policy.AM-SetTargetRequest.timeTaken}",
				"AM-SetWhatsAppCallbackRequest": "{apigee.metrics.policy.AM-SetWhatsAppCallbackRequest.timeTaken}",
				"EV-ExtractWhatsAppCallbackFields": "{apigee.metrics.policy.EV-ExtractWhatsAppCallbackFields.timeTaken}",
				"EV-FetchRespParam": "{apigee.metrics.policy.EV-FetchRespParam.timeTaken}",
				"EV-FetchToken": "{apigee.metrics.policy.EV-FetchToken.timeTaken}",
				"EV-FetchTransactionAmount": "{apigee.metrics.policy.EV-FetchTransactionAmount.timeTaken}",
				"EV-FetchTransactionType": "{apigee.metrics.policy.EV-FetchTransactionType.timeTaken}",
				"EV-MetaData": "{apigee.metrics.policy.EV-MetaData.timeTaken}",
				"JS-BackendFieldMapping": "{apigee.metrics.policy.JS-BackendFieldMapping.timeTaken}",
				"JS-RemoveProfileId": "{apigee.metrics.policy.JS-RemoveProfileId.timeTaken}",
				"JWT-GenerateRS256": "{apigee.metrics.policy.JWT-GenerateRS256.timeTaken}",
				"KVM-FetchCallbackKeys": "{apigee.metrics.policy.KVM-FetchCallbackKeys.timeTaken}",
				"KVM-FetchCallbackURL": "{apigee.metrics.policy.KVM-FetchCallbackURL.timeTaken}",
				"KVM-FetchIPs": "{apigee.metrics.policy.KVM-FetchIPs.timeTaken}",
				"SC-GetOAuthToken": "{apigee.metrics.policy.SC-GetOAuthToken.timeTaken}",
				"XTJ-ConvertRequestXML": "{apigee.metrics.policy.XTJ-ConvertRequestXML.timeTaken}"
            }
        }
    }]]></Input>
</ConnectorCallout>